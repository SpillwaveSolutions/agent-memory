# Plan 09-01: Setup Plugin Structure

## Metadata

```yaml
phase: 9
plan: 01
wave: 1
depends_on: []
files_modified:
  - plugins/memory-setup-plugin/.claude-plugin/marketplace.json
  - plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
  - plugins/memory-setup-plugin/skills/memory-setup/references/installation-methods.md
  - plugins/memory-setup-plugin/skills/memory-setup/references/configuration-options.md
  - plugins/memory-setup-plugin/skills/memory-setup/references/troubleshooting-guide.md
  - plugins/memory-setup-plugin/skills/memory-setup/references/platform-specifics.md
  - plugins/memory-setup-plugin/commands/memory-setup.md
  - plugins/memory-setup-plugin/commands/memory-status.md
  - plugins/memory-setup-plugin/commands/memory-config.md
  - plugins/memory-setup-plugin/agents/setup-troubleshooter.md
  - plugins/memory-setup-plugin/README.md
  - plugins/memory-setup-plugin/.gitignore
autonomous: true
```

## Objective

Create the complete plugin structure for the memory-setup plugin with marketplace manifest, skill, commands, and agent definitions following Claude Code plugin best practices.

## Context

This plugin provides interactive setup, configuration, and troubleshooting for agent-memory. It should:
- Guide users through first-time installation
- Provide health checks and status monitoring
- Enable configuration changes without file editing
- Offer autonomous troubleshooting for common issues

## Tasks

### Task 1: Create Plugin Directory Structure

```xml
<task id="1">
  <title>Create plugin directory structure</title>
  <description>
    Create the full directory structure for memory-setup-plugin:

    plugins/memory-setup-plugin/
    ├── .claude-plugin/
    ├── skills/memory-setup/
    │   └── references/
    ├── commands/
    └── agents/
  </description>
  <acceptance>
    - All directories exist
    - Structure matches marketplace plugin spec
  </acceptance>
</task>
```

### Task 2: Create marketplace.json

```xml
<task id="2">
  <title>Create marketplace.json manifest</title>
  <description>
    Create .claude-plugin/marketplace.json with:
    - Plugin name: "memory-setup"
    - Description focused on setup and management
    - Version: "1.0.0"
    - Author information
    - plugins array with skills, commands, agents references
  </description>
  <acceptance>
    - Valid JSON format
    - All plugin components referenced
    - Description explains value proposition
  </acceptance>
</task>
```

### Task 3: Create SKILL.md

```xml
<task id="3">
  <title>Create core SKILL.md with PDA structure</title>
  <description>
    Create skills/memory-setup/SKILL.md with:
    - YAML frontmatter (name, description, triggers)
    - Quick Start section (most common path)
    - Workflow overview (setup → status → config → troubleshoot)
    - Reference file navigation
    - Decision trees for common scenarios
    - Validation checklists

    Follow Progressive Disclosure Architecture:
    - Level 1: Quick start (10% of users need more)
    - Level 2: Workflow details (next 20%)
    - Level 3: Reference files (power users)
  </description>
  <acceptance>
    - Valid YAML frontmatter
    - Clear trigger phrases
    - Progressive disclosure structure
    - Links to all reference files
  </acceptance>
</task>
```

### Task 4: Create Reference Files

```xml
<task id="4">
  <title>Create reference documentation files</title>
  <description>
    Create references/ directory with:

    1. installation-methods.md
       - Cargo install instructions
       - Pre-built binary download
       - Platform-specific paths
       - Verification steps

    2. configuration-options.md
       - config.toml format and options
       - Environment variables
       - hooks.yaml configuration
       - Default values and overrides

    3. troubleshooting-guide.md
       - Common issues and solutions
       - Diagnostic commands
       - Log locations
       - How to report bugs

    4. platform-specifics.md
       - macOS (launchd, paths)
       - Linux (systemd, paths)
       - Windows (Task Scheduler, paths)
  </description>
  <acceptance>
    - Each file is self-contained
    - Copy-paste commands work
    - Platform variations documented
  </acceptance>
</task>
```

### Task 5: Create Command Files

```xml
<task id="5">
  <title>Create command definition files</title>
  <description>
    Create commands/ directory with:

    1. memory-setup.md
       - Slash command: /memory-setup
       - Interactive wizard flow
       - Flags: --fresh, --minimal, --advanced
       - Step-by-step instructions for the agent

    2. memory-status.md
       - Slash command: /memory-status
       - Health check output format
       - Flags: --json, --verbose
       - What to check and how

    3. memory-config.md
       - Slash command: /memory-config
       - Subcommands: show, set, reset
       - Configuration key paths
       - Validation rules
  </description>
  <acceptance>
    - Each command has clear purpose
    - Flags documented with examples
    - Output formats specified
  </acceptance>
</task>
```

### Task 6: Create Agent Definition

```xml
<task id="6">
  <title>Create setup-troubleshooter agent</title>
  <description>
    Create agents/setup-troubleshooter.md with:
    - Agent name and description
    - Trigger conditions (when to invoke)
    - Diagnostic capabilities
    - Fix capabilities (what it can modify)
    - Escalation path (when to ask user)
    - Example diagnostic flows
  </description>
  <acceptance>
    - Clear trigger conditions
    - Comprehensive diagnostic checklist
    - Safe fix actions defined
    - Knows when to escalate
  </acceptance>
</task>
```

### Task 7: Create README and .gitignore

```xml
<task id="7">
  <title>Create README.md and .gitignore</title>
  <description>
    Create:

    1. README.md
       - What the plugin does
       - Installation instructions
       - Quick start guide
       - Command reference
       - Troubleshooting tips

    2. .gitignore
       - Standard ignores for plugin development
  </description>
  <acceptance>
    - README covers all commands
    - Installation is one-liner
    - Examples are copy-paste ready
  </acceptance>
</task>
```

## Verification

```yaml
verification:
  - [ ] Plugin directory structure matches spec
  - [ ] marketplace.json is valid JSON
  - [ ] SKILL.md has valid YAML frontmatter
  - [ ] All reference files exist and are complete
  - [ ] All command files define their slash command
  - [ ] Agent file defines trigger conditions
  - [ ] README provides quick start path
```

## Must-Haves (Goal-Backward)

For Phase 9 success, this plan must deliver:
1. Complete plugin structure that can be installed in ~/.claude/skills/
2. SKILL.md that Claude can discover and invoke
3. Command definitions for /memory-setup, /memory-status, /memory-config
4. Agent definition for autonomous troubleshooting
5. Reference documentation for all configuration options
