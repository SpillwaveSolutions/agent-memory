---
phase: 19-opencode-commands-and-skills
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - plugins/memory-opencode-plugin/.opencode/command/memory-search.md
  - plugins/memory-opencode-plugin/.opencode/command/memory-recent.md
  - plugins/memory-opencode-plugin/.opencode/command/memory-context.md
autonomous: true

must_haves:
  truths:
    - "Commands are discoverable by OpenCode via file-based discovery"
    - "Command arguments are parsed from $ARGUMENTS variable"
    - "Commands reference the memory-query skill"
  artifacts:
    - path: "plugins/memory-opencode-plugin/.opencode/command/memory-search.md"
      provides: "Search command with $ARGUMENTS handling"
      contains: "$ARGUMENTS"
    - path: "plugins/memory-opencode-plugin/.opencode/command/memory-recent.md"
      provides: "Recent command with $ARGUMENTS handling"
      contains: "$ARGUMENTS"
    - path: "plugins/memory-opencode-plugin/.opencode/command/memory-context.md"
      provides: "Context command with $ARGUMENTS handling"
      contains: "$ARGUMENTS"
  key_links:
    - from: "plugins/memory-opencode-plugin/.opencode/command/*.md"
      to: "memory-query skill"
      via: "skill reference in description"
      pattern: "memory-query"
---

<objective>
Port Claude Code commands to OpenCode format with $ARGUMENTS substitution.

Purpose: Enable OpenCode users to access memory search, recent, and context commands
Output: Three command files in `.opencode/command/` directory
</objective>

<execution_context>
@/Users/richardhightower/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-opencode-commands-and-skills/19-RESEARCH.md
@plugins/memory-query-plugin/commands/memory-search.md
@plugins/memory-query-plugin/commands/memory-recent.md
@plugins/memory-query-plugin/commands/memory-context.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create memory-search command</name>
  <files>plugins/memory-opencode-plugin/.opencode/command/memory-search.md</files>
  <action>
Create directory structure and memory-search.md command file.

Port from Claude Code format to OpenCode format:
- Remove `parameters:` array from frontmatter
- Remove `skills:` array from frontmatter
- Keep `description:` field in frontmatter
- Add `## Arguments` section documenting `$ARGUMENTS` parsing:
  - `$1`: Topic or keyword to search (required)
  - `--period <value>`: Time period filter (optional)
- Keep Process, Output Format, and Examples sections
- Update examples to show `$ARGUMENTS` usage

Frontmatter format:
```yaml
---
description: Search past conversations by topic or keyword
---
```

Add Arguments section after Usage:
```markdown
## Arguments

Parse from `$ARGUMENTS`:
- **$1**: Topic or keyword to search (required)
- **--period <value>**: Time period filter (optional)

Example: `/memory-search authentication --period "last week"`
→ $ARGUMENTS = "authentication --period last week"
```
  </action>
  <verify>File exists and contains `$ARGUMENTS` documentation, no `parameters:` in frontmatter</verify>
  <done>memory-search.md created with OpenCode format</done>
</task>

<task type="auto">
  <name>Task 2: Create memory-recent command</name>
  <files>plugins/memory-opencode-plugin/.opencode/command/memory-recent.md</files>
  <action>
Port from Claude Code format to OpenCode format:
- Remove `parameters:` array from frontmatter
- Remove `skills:` array from frontmatter
- Keep `description:` field in frontmatter
- Add `## Arguments` section documenting `$ARGUMENTS` parsing:
  - `--days <N>`: Number of days to look back (default 7)
  - `--limit <N>`: Maximum segments to show (default 10)
- Keep Process, Output Format, and Examples sections

Frontmatter format:
```yaml
---
description: Show recent conversation summaries
---
```

Add Arguments section after Usage:
```markdown
## Arguments

Parse from `$ARGUMENTS`:
- **--days <N>**: Number of days to look back (default: 7)
- **--limit <N>**: Maximum number of segments to show (default: 10)

Example: `/memory-recent --days 3 --limit 20`
→ $ARGUMENTS = "--days 3 --limit 20"
```
  </action>
  <verify>File exists and contains `$ARGUMENTS` documentation, no `parameters:` in frontmatter</verify>
  <done>memory-recent.md created with OpenCode format</done>
</task>

<task type="auto">
  <name>Task 3: Create memory-context command</name>
  <files>plugins/memory-opencode-plugin/.opencode/command/memory-context.md</files>
  <action>
Port from Claude Code format to OpenCode format:
- Remove `parameters:` array from frontmatter
- Remove `skills:` array from frontmatter
- Keep `description:` field in frontmatter
- Add `## Arguments` section documenting `$ARGUMENTS` parsing:
  - `$1`: Grip ID to expand (required, format: grip:timestamp:ulid)
  - `--before <N>`: Events before excerpt (default 3)
  - `--after <N>`: Events after excerpt (default 3)
- Keep Process, Output Format, and Examples sections

Frontmatter format:
```yaml
---
description: Expand a grip to see full conversation context around an excerpt
---
```

Add Arguments section after Usage:
```markdown
## Arguments

Parse from `$ARGUMENTS`:
- **$1**: Grip ID to expand (required, format: `grip:{timestamp}:{ulid}`)
- **--before <N>**: Number of events to include before excerpt (default: 3)
- **--after <N>**: Number of events to include after excerpt (default: 3)

Example: `/memory-context grip:1706540400000:01HN4QXKN6YWXVKZ3JMHP4BCDE`
→ $ARGUMENTS = "grip:1706540400000:01HN4QXKN6YWXVKZ3JMHP4BCDE"
```
  </action>
  <verify>File exists and contains `$ARGUMENTS` documentation, no `parameters:` in frontmatter</verify>
  <done>memory-context.md created with OpenCode format</done>
</task>

</tasks>

<verification>
```bash
# Check all command files exist
ls -la plugins/memory-opencode-plugin/.opencode/command/

# Verify no parameters: field in frontmatter
for f in plugins/memory-opencode-plugin/.opencode/command/*.md; do
  echo "=== $f ==="
  head -20 "$f"
done

# Verify $ARGUMENTS is documented
grep -l "\$ARGUMENTS" plugins/memory-opencode-plugin/.opencode/command/*.md | wc -l
# Should be 3
```
</verification>

<success_criteria>
- Three command files created in `.opencode/command/` directory
- Each file has YAML frontmatter with `description:` only
- Each file documents `$ARGUMENTS` parsing in Arguments section
- No `parameters:` or `skills:` arrays in frontmatter
- Command filenames match: memory-search.md, memory-recent.md, memory-context.md
</success_criteria>

<output>
After completion, create `.planning/phases/19-opencode-commands-and-skills/19-01-SUMMARY.md`
</output>
