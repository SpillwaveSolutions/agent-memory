---
phase: 19-opencode-commands-and-skills
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - plugins/memory-opencode-plugin/.opencode/skill/memory-query/SKILL.md
  - plugins/memory-opencode-plugin/.opencode/skill/memory-query/references/command-reference.md
  - plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/SKILL.md
  - plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/references/command-reference.md
  - plugins/memory-opencode-plugin/.opencode/skill/topic-graph/SKILL.md
  - plugins/memory-opencode-plugin/.opencode/skill/topic-graph/references/command-reference.md
autonomous: true

must_haves:
  truths:
    - "Skills are discoverable by OpenCode via file-based discovery"
    - "SKILL.md files have valid YAML frontmatter with name and description"
    - "Skill names are lowercase with hyphens only"
    - "Each skill has a references/ subdirectory with command-reference.md"
  artifacts:
    - path: "plugins/memory-opencode-plugin/.opencode/skill/memory-query/SKILL.md"
      provides: "Core memory query skill"
      contains: "name: memory-query"
    - path: "plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/SKILL.md"
      provides: "Retrieval policy skill"
      contains: "name: retrieval-policy"
    - path: "plugins/memory-opencode-plugin/.opencode/skill/topic-graph/SKILL.md"
      provides: "Topic graph skill"
      contains: "name: topic-graph"
  key_links:
    - from: "plugins/memory-opencode-plugin/.opencode/skill/*/SKILL.md"
      to: "references/command-reference.md"
      via: "See [Command Reference] link"
      pattern: "command-reference.md"
---

<objective>
Port core skills (memory-query, retrieval-policy, topic-graph) to OpenCode format.

Purpose: Enable OpenCode to load and reference memory skills
Output: Three skill directories with SKILL.md and references/
</objective>

<execution_context>
@/Users/richardhightower/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-opencode-commands-and-skills/19-RESEARCH.md
@plugins/memory-query-plugin/skills/memory-query/SKILL.md
@plugins/memory-query-plugin/skills/retrieval-policy/SKILL.md
@plugins/memory-query-plugin/skills/topic-graph/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Port memory-query skill</name>
  <files>
plugins/memory-opencode-plugin/.opencode/skill/memory-query/SKILL.md
plugins/memory-opencode-plugin/.opencode/skill/memory-query/references/command-reference.md
  </files>
  <action>
Create skill directory structure and copy SKILL.md from Claude Code plugin.

The skill format is identical between Claude Code and OpenCode. Copy directly:
1. Create directories: `.opencode/skill/memory-query/` and `.opencode/skill/memory-query/references/`
2. Copy SKILL.md content exactly as-is (YAML frontmatter + markdown body)
3. Copy references/command-reference.md if exists, otherwise create placeholder

Verify frontmatter contains:
- `name: memory-query` (lowercase, hyphenated)
- `description:` with detailed trigger phrases
- `license: MIT`
- `metadata:` with version and author

The SKILL.md format is fully portable - no changes needed.
  </action>
  <verify>
```bash
head -15 plugins/memory-opencode-plugin/.opencode/skill/memory-query/SKILL.md
# Should show name: memory-query in frontmatter
```
  </verify>
  <done>memory-query skill ported to OpenCode format</done>
</task>

<task type="auto">
  <name>Task 2: Port retrieval-policy skill</name>
  <files>
plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/SKILL.md
plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/references/command-reference.md
  </files>
  <action>
Create skill directory structure and copy SKILL.md from Claude Code plugin.

1. Create directories: `.opencode/skill/retrieval-policy/` and `.opencode/skill/retrieval-policy/references/`
2. Copy SKILL.md content exactly as-is
3. Copy references/command-reference.md if exists, otherwise create placeholder

Verify frontmatter contains:
- `name: retrieval-policy` (lowercase, hyphenated)
- `description:` with detailed trigger phrases
- `license: MIT`
- `metadata:` with version and author
  </action>
  <verify>
```bash
head -15 plugins/memory-opencode-plugin/.opencode/skill/retrieval-policy/SKILL.md
# Should show name: retrieval-policy in frontmatter
```
  </verify>
  <done>retrieval-policy skill ported to OpenCode format</done>
</task>

<task type="auto">
  <name>Task 3: Port topic-graph skill</name>
  <files>
plugins/memory-opencode-plugin/.opencode/skill/topic-graph/SKILL.md
plugins/memory-opencode-plugin/.opencode/skill/topic-graph/references/command-reference.md
  </files>
  <action>
Create skill directory structure and copy SKILL.md from Claude Code plugin.

1. Create directories: `.opencode/skill/topic-graph/` and `.opencode/skill/topic-graph/references/`
2. Copy SKILL.md content exactly as-is
3. Copy references/command-reference.md if exists, otherwise create placeholder

Verify frontmatter contains:
- `name: topic-graph` (lowercase, hyphenated)
- `description:` with detailed trigger phrases
- `license: MIT`
- `metadata:` with version and author
  </action>
  <verify>
```bash
head -15 plugins/memory-opencode-plugin/.opencode/skill/topic-graph/SKILL.md
# Should show name: topic-graph in frontmatter
```
  </verify>
  <done>topic-graph skill ported to OpenCode format</done>
</task>

</tasks>

<verification>
```bash
# Check skill directories exist
ls -la plugins/memory-opencode-plugin/.opencode/skill/

# Check each skill has SKILL.md and references/
for skill in memory-query retrieval-policy topic-graph; do
  echo "=== $skill ==="
  ls -la plugins/memory-opencode-plugin/.opencode/skill/$skill/
done

# Verify skill names in frontmatter match directory names
for skill in memory-query retrieval-policy topic-graph; do
  echo "=== $skill ==="
  grep "^name:" plugins/memory-opencode-plugin/.opencode/skill/$skill/SKILL.md
done
```
</verification>

<success_criteria>
- Three skill directories created: memory-query, retrieval-policy, topic-graph
- Each has SKILL.md with valid YAML frontmatter
- Each has references/ subdirectory with command-reference.md
- Skill names in frontmatter match directory names
- Description field is 1-1024 characters with trigger phrases
</success_criteria>

<output>
After completion, create `.planning/phases/19-opencode-commands-and-skills/19-02-SUMMARY.md`
</output>
