---
id: 15-05
name: Plugin integration and memory-setup updates
phase: 15
plan: 05
type: execute
wave: 3
depends_on: ["15-01", "15-02", "15-03", "15-04"]
files_modified:
  - plugins/memory-setup-plugin/.claude-plugin/marketplace.json
  - plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
  - plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md
autonomous: true
estimated_effort: S

must_haves:
  truths:
    - "marketplace.json includes all three new skills"
    - "memory-setup SKILL.md updated with gap options in --advanced mode"
    - "wizard-questions.md updated with new advanced questions"
    - "All 29 config options are addressable through wizard skills"
    - "Skills are discoverable via Claude Code plugin system"
  artifacts:
    - path: "plugins/memory-setup-plugin/.claude-plugin/marketplace.json"
      provides: "Plugin manifest with all skills"
      contains: "memory-storage"
    - path: "plugins/memory-setup-plugin/skills/memory-setup/SKILL.md"
      provides: "Updated memory-setup skill with gap options"
      contains: "timeout_secs"
    - path: "plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md"
      provides: "Updated wizard questions with advanced options"
      contains: "overlap_tokens"
  key_links:
    - from: "plugins/memory-setup-plugin/.claude-plugin/marketplace.json"
      to: "plugins/memory-setup-plugin/skills/memory-storage"
      via: "skills array reference"
      pattern: "./skills/memory-storage"
---

<objective>
Integrate all new skills into the plugin manifest and update memory-setup to cover gap configuration options, ensuring 100% coverage of all 29 config options.

Purpose: Complete the phase by wiring up all new skills for discovery and closing configuration coverage gaps.

Output: Updated marketplace.json, updated memory-setup SKILL.md and wizard-questions.md with gap options.
</objective>

<execution_context>
@/Users/richardhightower/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-configuration-wizard-skills/15-RESEARCH.md
@docs/plans/configuration-wizard-skills-plan.md
@plugins/memory-setup-plugin/.claude-plugin/marketplace.json
@plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
@plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update marketplace.json with new skills</name>
  <files>plugins/memory-setup-plugin/.claude-plugin/marketplace.json</files>
  <action>
Update the marketplace.json to include the three new skills.

**Current structure has:**
```json
{
  "plugins": [{
    "skills": ["./skills/memory-setup"],
    "commands": [...],
    "agents": [...]
  }]
}
```

**Update to:**
```json
{
  "name": "memory-setup-agentic-plugin",
  "owner": {
    "name": "SpillwaveSolutions",
    "email": "rick@spillwave.com"
  },
  "metadata": {
    "description": "Setup, configure, and troubleshoot agent-memory installation with specialized wizards for storage, LLM, and multi-agent configuration",
    "version": "1.1.0"
  },
  "plugins": [
    {
      "name": "memory-setup",
      "description": "Setup, configure, and troubleshoot agent-memory installation. Use when asked to 'install agent-memory', 'setup memory', 'check memory status', 'configure memory', 'fix memory daemon', or 'troubleshoot memory'. Provides /memory-setup (interactive wizard), /memory-status (health check), /memory-config (configuration management). For advanced configuration, use /memory-storage, /memory-llm, or /memory-agents.",
      "source": "./",
      "strict": false,
      "skills": [
        "./skills/memory-setup",
        "./skills/memory-storage",
        "./skills/memory-llm",
        "./skills/memory-agents"
      ],
      "commands": [
        "./commands/memory-setup.md",
        "./commands/memory-status.md",
        "./commands/memory-config.md"
      ],
      "agents": [
        "./agents/setup-troubleshooter.md"
      ]
    }
  ]
}
```

Key changes:
- Version bump to 1.1.0
- Updated description mentioning specialized wizards
- Added three new skill paths
- Updated plugin description with cross-references
  </action>
  <verify>
```bash
cat plugins/memory-setup-plugin/.claude-plugin/marketplace.json | grep -E "memory-storage|memory-llm|memory-agents"
cat plugins/memory-setup-plugin/.claude-plugin/marketplace.json | grep "version"
```
All three new skills listed, version is 1.1.0
  </verify>
  <done>marketplace.json updated with all four skills and version 1.1.0</done>
</task>

<task type="auto">
  <name>Task 2: Update memory-setup SKILL.md with gap options</name>
  <files>plugins/memory-setup-plugin/skills/memory-setup/SKILL.md</files>
  <action>
Update memory-setup SKILL.md to add the gap configuration options in --advanced mode.

**Add new section after existing Advanced Mode section:**

```markdown
### Advanced Configuration Options

These options are available in `--advanced` mode:

#### Server Timeout

In --advanced mode, after server configuration, ask:

```
Configure server timeout?

1. 30 seconds (Default)
2. 60 seconds (for slow connections)
3. Custom
```

Config: `[server] timeout_secs = 30`

#### TOC Overlap Settings

In --advanced mode, after segmentation tuning, ask:

```
Configure segment overlap for context continuity?

1. Standard (500 tokens, 5 minutes) - Recommended
2. Minimal (100 tokens, 1 minute) - Less context
3. Maximum (1000 tokens, 10 minutes) - More context
4. Custom
```

Config:
```toml
[toc]
overlap_tokens = 500
overlap_minutes = 5
```

#### Logging Configuration

In --advanced mode, add logging step:

```
Configure logging output?

1. Info to stderr (Default)
2. Debug to stderr (verbose)
3. Debug to file
4. Custom
```

Config:
```toml
[logging]
level = "info"    # trace, debug, info, warn, error
format = "pretty" # pretty, json, compact
file = ""         # empty = stderr, or path like ~/.memory-daemon.log
```
```

**Also update the Reference Files section** to add:
```markdown
- [Advanced Options](references/advanced-options.md) - Server, TOC, and logging options
```

**Add cross-skill navigation** at the end:
```markdown
## Related Skills

For specialized configuration:
- `/memory-storage` - Storage paths, retention, cleanup, GDPR
- `/memory-llm` - LLM provider, model discovery, cost estimation
- `/memory-agents` - Multi-agent mode, team settings
```
  </action>
  <verify>
```bash
grep -c "timeout_secs\|overlap_tokens\|logging" plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
grep "memory-storage\|memory-llm\|memory-agents" plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
```
Gap options added, cross-skill references added
  </verify>
  <done>memory-setup SKILL.md updated with gap options and cross-skill navigation</done>
</task>

<task type="auto">
  <name>Task 3: Update wizard-questions.md with gap questions</name>
  <files>plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md</files>
  <action>
Update wizard-questions.md to include the new advanced questions.

**Add after Advanced Step 3c (Segmentation Tuning):**

```markdown
### Advanced Step 3d: Server Timeout

**Condition:** `--advanced` flag

```
Configure gRPC request timeout:

1. 30 seconds (Default) - Standard timeout
2. 60 seconds - For slow networks
3. 120 seconds - For very slow connections
4. Custom - Specify seconds
```

### Advanced Step 3e: Segment Overlap

**Condition:** `--advanced` flag

```
Configure segment overlap for context continuity:

1. Standard (Recommended) - 500 tokens, 5 minutes overlap
2. Minimal - 100 tokens, 1 minute overlap
3. Maximum - 1000 tokens, 10 minutes overlap
4. Custom - Specify overlap_tokens and overlap_minutes
```

### Advanced Step 3f: Logging

**Condition:** `--advanced` flag

```
Configure logging output:

1. Info to stderr (Default) - Standard logging
2. Debug to stderr - Verbose for troubleshooting
3. Info to file - Log to ~/.memory-daemon.log
4. Debug to file - Verbose logging to file
5. Custom - Specify level, format, and file
```

Options:

| Option | level | format | file |
|--------|-------|--------|------|
| Info stderr | info | pretty | (empty) |
| Debug stderr | debug | pretty | (empty) |
| Info file | info | json | ~/.memory-daemon.log |
| Debug file | debug | json | ~/.memory-daemon.log |
```

**Update the question dependencies diagram** to show the new steps.

**Add section at end:**

```markdown
## Configuration Coverage Verification

All 29 configuration options are now covered:

| Section | Options | Covered By |
|---------|---------|------------|
| [storage] | path, write_buffer_size_mb, max_background_jobs | memory-setup, memory-storage |
| [server] | host, port, timeout_secs | memory-setup |
| [summarizer] | provider, model, api_key, api_endpoint, max_tokens, temperature | memory-setup, memory-llm |
| [toc] | segment_min/max_tokens, time_gap_minutes, overlap_tokens/minutes | memory-setup |
| [rollup] | min_age_hours, schedule | memory-storage |
| [logging] | level, format, file | memory-setup |
| [agents] | mode, storage_strategy, agent_id, query_scope | memory-agents |
| [retention] | policy, cleanup_schedule, archive_strategy, gdpr_mode | memory-storage |
| [team] | name, storage_path, shared | memory-agents |
```
  </action>
  <verify>
```bash
grep -c "timeout\|overlap\|logging" plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md
grep "Coverage\|29" plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md
```
Gap questions added, coverage matrix added
  </verify>
  <done>wizard-questions.md updated with gap questions and coverage verification matrix</done>
</task>

</tasks>

<verification>
Run these commands to verify the plan is complete:

```bash
# Verify marketplace.json
cat plugins/memory-setup-plugin/.claude-plugin/marketplace.json | python3 -c "import sys,json; json.load(sys.stdin); print('Valid JSON')"
grep -c "memory-storage\|memory-llm\|memory-agents" plugins/memory-setup-plugin/.claude-plugin/marketplace.json

# Verify SKILL.md updates
grep -c "timeout_secs\|overlap\|logging" plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
grep "Related Skills" plugins/memory-setup-plugin/skills/memory-setup/SKILL.md

# Verify wizard-questions.md
grep -c "3d\|3e\|3f" plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md
grep "Coverage" plugins/memory-setup-plugin/skills/memory-setup/references/wizard-questions.md

# Final directory structure verification
find plugins/memory-setup-plugin/skills -name "*.md" | wc -l
```

Expected: 4+ skills in marketplace.json, all gap options documented, 15+ .md files total
</verification>

<success_criteria>
1. marketplace.json valid JSON with all four skills listed
2. Version bumped to 1.1.0
3. memory-setup SKILL.md has gap options section
4. Cross-skill navigation added to memory-setup
5. wizard-questions.md has three new advanced steps (3d, 3e, 3f)
6. Coverage verification matrix shows all 29 options covered
</success_criteria>

<output>
After completion, create `.planning/phases/15-configuration-wizard-skills/15-05-SUMMARY.md`

Then verify complete phase coverage by running:
```bash
# Count all config options covered
grep -r "config.toml\|[storage]\|[server]\|[summarizer]\|[toc]\|[rollup]\|[logging]\|[agents]\|[retention]\|[team]" \
  plugins/memory-setup-plugin/skills/*/SKILL.md \
  plugins/memory-setup-plugin/skills/*/references/*.md | wc -l
```
</output>
