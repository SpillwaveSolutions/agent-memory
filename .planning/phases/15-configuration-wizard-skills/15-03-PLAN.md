---
id: 15-03
name: memory-agents skill
phase: 15
plan: 03
type: execute
wave: 2
depends_on: ["15-01", "15-02"]
files_modified:
  - plugins/memory-setup-plugin/skills/memory-agents/SKILL.md
  - plugins/memory-setup-plugin/skills/memory-agents/references/storage-strategies.md
  - plugins/memory-setup-plugin/skills/memory-agents/references/team-setup.md
  - plugins/memory-setup-plugin/skills/memory-agents/references/agent-identifiers.md
autonomous: true
estimated_effort: M

must_haves:
  truths:
    - "User can select usage mode (single user, multi-agent, team)"
    - "User can configure storage strategy (unified vs separate)"
    - "User can set agent identifier for tagging"
    - "User can configure cross-agent query scope"
    - "User can set up team mode settings"
    - "State detection identifies existing agent configuration"
  artifacts:
    - path: "plugins/memory-setup-plugin/skills/memory-agents/SKILL.md"
      provides: "Interactive multi-agent wizard skill"
      min_lines: 200
    - path: "plugins/memory-setup-plugin/skills/memory-agents/references/storage-strategies.md"
      provides: "Storage strategy documentation"
      min_lines: 50
    - path: "plugins/memory-setup-plugin/skills/memory-agents/references/team-setup.md"
      provides: "Team mode documentation"
      min_lines: 40
    - path: "plugins/memory-setup-plugin/skills/memory-agents/references/agent-identifiers.md"
      provides: "Agent ID documentation"
      min_lines: 40
  key_links:
    - from: "plugins/memory-setup-plugin/skills/memory-agents/SKILL.md"
      to: "~/.config/memory-daemon/config.toml"
      via: "config generation for [agents] section"
      pattern: "\\[agents\\]|\\[team\\]"
---

<objective>
Create the `/memory-agents` interactive wizard skill for configuring multi-agent memory settings including store isolation, agent tagging, cross-agent query permissions, and team settings.

Purpose: Enable users who run multiple AI agents (Claude Code, Cursor, etc.) or work in teams to configure how memory is shared or isolated between agents.

Output: SKILL.md file with 6-step wizard flow plus 3 reference documentation files.
</objective>

<execution_context>
@/Users/richardhightower/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-configuration-wizard-skills/15-RESEARCH.md
@docs/plans/configuration-wizard-skills-plan.md
@plugins/memory-setup-plugin/skills/memory-setup/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create memory-agents SKILL.md with 6-step wizard</name>
  <files>plugins/memory-setup-plugin/skills/memory-agents/SKILL.md</files>
  <action>
Create the SKILL.md file following the memory-setup/SKILL.md pattern.

**YAML Frontmatter:**
```yaml
---
name: memory-agents
description: |
  This skill should be used when the user asks to "configure multi-agent memory",
  "set up team memory", "configure agent isolation", "set agent ID",
  "share memory between agents", or "configure cross-agent queries".
  Provides interactive wizard for multi-agent configuration.
license: MIT
metadata:
  version: 1.0.0
  author: SpillwaveSolutions
---
```

**Content Structure:**
1. Header section with purpose and when not to use
2. Quick Start table with commands:
   - `/memory-agents` - Interactive multi-agent wizard
   - `/memory-agents --single` - Configure for single user mode
   - `/memory-agents --team` - Configure for team use

3. Question Flow diagram (ASCII art showing 6 steps with conditional branches)

4. State Detection section with bash commands:
   ```bash
   # Current multi-agent config
   grep -A5 'agents' ~/.config/memory-daemon/config.toml

   # Current agent_id
   grep 'agent_id' ~/.config/memory-daemon/config.toml

   # Detect other agents
   ls ~/.memory-store/agents/

   # Hostname and user
   hostname
   whoami
   ```

5. **Six wizard steps with AskUserQuestion format:**

**Step 1: Usage Mode**
- question: "How will agent-memory be used?"
- header: "Mode"
- options:
  - Single user (Recommended): One person, one agent (Claude Code)
  - Single user, multiple agents: One person using Claude Code, Cursor, etc.
  - Team mode: Multiple users sharing memory on a team
- Always ask (core decision)

**Step 2: Storage Strategy** (if not single user)
- question: "How should agent data be stored?"
- header: "Storage"
- options:
  - Unified store with tags (Recommended): Single database, agents identified by tag, easy cross-query
  - Separate stores per agent: Complete isolation, cannot query across agents
- Skip if: Step 1 selected "Single user"

**Step 3: Agent Identifier**
- question: "Choose your agent identifier (tags all events from this instance):"
- header: "Agent ID"
- options:
  - claude-code (Recommended): Standard identifier for Claude Code
  - claude-code-{hostname}: Unique per machine for multi-machine setups
  - {username}-claude: User-specific for shared machines
  - Custom: Specify a custom identifier
- Always ask (important for tracking)

**Step 4: Cross-Agent Query Permissions** (if unified store)
- question: "What data should queries return?"
- header: "Query Scope"
- options:
  - Own events only (Recommended): Query only this agent's data
  - All agents: Query all agents' data (read-only)
  - Specified agents: Query specific agents' data
- Skip if: Storage strategy is "separate"

**Step 5: Storage Organization** (--advanced, if separate stores)
- question: "How should separate stores be organized?"
- header: "Organization"
- options:
  - ~/.memory-store/{agent_id}/: Agent-specific subdirectories
  - Custom paths: Specify custom storage paths
- Skip unless: --advanced AND separate storage selected

**Step 6: Team Settings** (if team mode)
- question: "Configure team sharing settings?"
- header: "Team"
- options:
  - Read-only sharing: See team events, write to own store
  - Full sharing: All team members read/write to shared store
  - Custom permissions: Configure per-agent permissions
- Skip unless: Step 1 selected "Team mode"

6. Config Generation section showing [agents] and [team] sections
7. Validation section (agent ID format, path writable, unique ID)
8. Output Formatting
9. Reference Files links
10. Cross-skill navigation hints
  </action>
  <verify>
```bash
ls -la plugins/memory-setup-plugin/skills/memory-agents/SKILL.md
wc -l plugins/memory-setup-plugin/skills/memory-agents/SKILL.md
grep -c "Mode\|Storage\|Agent ID\|Query Scope" plugins/memory-setup-plugin/skills/memory-agents/SKILL.md
```
File exists, has 200+ lines, contains wizard steps
  </verify>
  <done>SKILL.md exists with 6-step wizard flow for multi-agent configuration</done>
</task>

<task type="auto">
  <name>Task 2: Create storage-strategies.md reference documentation</name>
  <files>plugins/memory-setup-plugin/skills/memory-agents/references/storage-strategies.md</files>
  <action>
Create reference documentation for multi-agent storage strategies.

**Content:**
1. Overview of multi-agent storage concepts

2. Strategy comparison table:
   | Strategy | Isolation | Cross-Query | Complexity | Use Case |
   |----------|-----------|-------------|------------|----------|
   | Unified with tags | Logical | Yes (configurable) | Simple | Most multi-agent setups |
   | Separate stores | Physical | No | Higher | Strict isolation needed |

3. **Unified Store with Tags:**
   - Single database at ~/.memory-store
   - Events tagged with agent_id field
   - Query filtering by agent_id
   - Pros: Easy cross-agent search, single backup
   - Cons: All data in one place

4. **Separate Stores:**
   - Directory per agent: ~/.memory-store/{agent_id}/
   - Complete isolation
   - Pros: Maximum privacy, independent backups
   - Cons: No cross-agent queries, more disk usage

5. Migration between strategies
6. Configuration examples
7. Decision tree for choosing strategy
  </action>
  <verify>
```bash
ls -la plugins/memory-setup-plugin/skills/memory-agents/references/storage-strategies.md
grep -c "Unified\|Separate\|agent_id" plugins/memory-setup-plugin/skills/memory-agents/references/storage-strategies.md
```
File exists with strategy documentation
  </verify>
  <done>storage-strategies.md documents unified vs separate storage with tradeoffs</done>
</task>

<task type="auto">
  <name>Task 3: Create team-setup.md and agent-identifiers.md references</name>
  <files>
plugins/memory-setup-plugin/skills/memory-agents/references/team-setup.md
plugins/memory-setup-plugin/skills/memory-agents/references/agent-identifiers.md
  </files>
  <action>
**Create team-setup.md:**
1. Team mode overview and use cases
2. Team configuration options:
   - Team name
   - Shared storage path
   - Permission levels

3. Permission models table:
   | Mode | Read | Write | Use Case |
   |------|------|-------|----------|
   | Read-only | All team | Own only | Team visibility |
   | Full sharing | All team | All team | Collaborative work |
   | Custom | Configurable | Configurable | Enterprise |

4. Setup steps for team mode
5. Network considerations (shared storage, NFS, etc.)
6. Configuration example

**Create agent-identifiers.md:**
1. What is an agent identifier:
   - Tags all events from this agent instance
   - Used for filtering and attribution
   - Persists across sessions

2. Identifier patterns table:
   | Pattern | Example | Use Case |
   |---------|---------|----------|
   | Simple | `claude-code` | Single user, single machine |
   | Host-specific | `claude-code-macbook` | Multi-machine |
   | User-specific | `alice-claude` | Shared machines |
   | Project-specific | `project-x-claude` | Per-project isolation |

3. Identifier requirements:
   - 3-50 characters
   - Alphanumeric, hyphens, underscores
   - Must be unique in unified store

4. Changing identifiers (migration considerations)
5. Environment variable override
  </action>
  <verify>
```bash
ls -la plugins/memory-setup-plugin/skills/memory-agents/references/team-setup.md
ls -la plugins/memory-setup-plugin/skills/memory-agents/references/agent-identifiers.md
wc -l plugins/memory-setup-plugin/skills/memory-agents/references/*.md
```
Both files exist with appropriate content
  </verify>
  <done>team-setup.md and agent-identifiers.md created with team and ID documentation</done>
</task>

</tasks>

<verification>
Run these commands to verify the plan is complete:

```bash
# Verify directory structure
ls -la plugins/memory-setup-plugin/skills/memory-agents/
ls -la plugins/memory-setup-plugin/skills/memory-agents/references/

# Verify SKILL.md structure
grep -E "^---$|^name:|question:|header:|options:" plugins/memory-setup-plugin/skills/memory-agents/SKILL.md | head -30

# Verify reference docs
for f in plugins/memory-setup-plugin/skills/memory-agents/references/*.md; do
  echo "=== $f ===" && head -10 "$f"
done

# Count lines
wc -l plugins/memory-setup-plugin/skills/memory-agents/SKILL.md
wc -l plugins/memory-setup-plugin/skills/memory-agents/references/*.md
```
</verification>

<success_criteria>
1. SKILL.md has valid YAML frontmatter with name: memory-agents
2. Six wizard steps documented with conditional branching
3. All three modes covered (single, multi-agent, team)
4. Three reference files created (strategies, team, identifiers)
5. Agent identifier validation rules documented
6. Cross-agent query permissions explained
</success_criteria>

<output>
After completion, create `.planning/phases/15-configuration-wizard-skills/15-03-SUMMARY.md`
</output>
